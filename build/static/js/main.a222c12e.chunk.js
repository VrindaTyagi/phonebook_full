(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),u=t(14),a=t.n(u),r=t(3),i=function(e){return Object(c.jsxs)("div",{children:["\xa0 Filter\xa0shown\xa0with\xa0",Object(c.jsx)("input",{type:"text",onChange:e.onChange})]})},s=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:e.onSubmit,children:["Name:\xa0",Object(c.jsx)("input",{onChange:e.onChange,type:"text",name:"name"}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(c.jsx)("br",{}),"\xa0Number:\xa0",Object(c.jsx)("input",{onChange:e.onChange,type:"number",name:"number"}),Object(c.jsx)("button",{type:"submit",children:"add"}),"\xa0\xa0\xa0\xa0"]}),"\xa0\xa0\xa0\xa0"]})},b=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("ul",{type:"none",children:[e.showAll&&e.persons&&e.persons.map((function(n){return n.name.toLowerCase().includes(e.filteredName)?Object(c.jsx)("div",{children:Object(c.jsxs)("li",{className:"person",children:[n.name,"\xa0",n.number,"\xa0\xa0",Object(c.jsxs)("span",{children:[" ",Object(c.jsx)("button",{onClick:e.handleDeletePerson(n.id,n.name),type:"submit",children:"delete"})," "]})]},n.name)}):Object(c.jsx)(c.Fragment,{children:" "})})),"\xa0\xa0\xa0\xa0\xa0\xa0"]})})},l=t(4),d=t.n(l),j="/api/persons",h=function(){return d.a.get(j).then((function(e){return e.data}))},m=function(e){return d.a.post(j,e).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e,n){return d.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.message,t=e.status;return null===n?null:!1===t?Object(c.jsx)("div",{className:"error",children:n}):Object(c.jsx)("div",{className:"success",children:n})},x=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],u=n[1],a=Object(o.useState)(""),l=Object(r.a)(a,2),d=l[0],j=l[1],x=Object(o.useState)(""),g=Object(r.a)(x,2),v=g[0],w=g[1],y=Object(o.useState)(!0),C=Object(r.a)(y,2),N=C[0],S=C[1],k=Object(o.useState)(""),D=Object(r.a)(k,2),T=D[0],A=D[1],P=Object(o.useState)(null),E=Object(r.a)(P,2),F=E[0],J=E[1],L=Object(o.useState)(!1),B=Object(r.a)(L,2),I=B[0],q=B[1];Object(o.useEffect)((function(){h().then((function(e){u(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(p,{message:F,status:I}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0",Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(i,{onChange:function(e){e.preventDefault(),A(e.target.value.toLowerCase()),S(!0)}}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(c.jsx)("h2",{children:"Add\xa0a\xa0new"}),Object(c.jsx)(s,{onSubmit:function(e){if(e.preventDefault(),function(e,n,t){return!!e.some((function(e){return e.name===n&&e.number===Number(t)}))}(t,d,v))q(!0),J("".concat(d,"  is already added to phonebook")),setTimeout((function(){J(null)}),5e3);else if(t.some((function(e){return e.name===d&&e.number!==Number(v)}))){if(window.confirm("".concat(d,"\xa0 is\xa0already\xa0added\xa0to\xa0phonebook, do u want to replace its number?"))){var n=t.find((function(e){return e.name===d})).id;O(n,{name:d,number:v}).then((function(e){return u(t.map((function(t){return t.id===n?e:t})))})).catch((function(e){q(!1),J("That name is already added to phonebook"),setTimeout((function(){J(null)}),5e3)}))}}else{m({name:d,number:v}).then((function(e){u(t.concat(e)),q(!0),J("Added name")})).catch((function(e){q(!1),J("".concat(e.response.data.error))})),setTimeout((function(){J(null)}),3e3)}},onChange:function(e){e.preventDefault(),"name"===e.target.name?j(e.target.value):w(e.target.value)}}),"\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0",Object(c.jsx)("h2",{children:"Numbers"}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(c.jsx)(b,{showAll:N,filteredName:T,persons:t,handleDeletePerson:function(e,n){return function(){window.confirm("Do you want to Delete ".concat(n," ?"))&&f(e).then((function(){u(t.filter((function(n){return n.id!==e}))),q(!0),J("Deleted ".concat(n)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){q(!1),J("'".concat(n,"' cannot be Deleted.")),setTimeout((function(){J(null)}),5e3)}))}}})]})};t(37);a.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.a222c12e.chunk.js.map